var L=Object.defineProperty;var H=(f,d,t)=>d in f?L(f,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[d]=t;var o=(f,d,t)=>(H(f,typeof d!="symbol"?d+"":d,t),t);import{R as g,j as e}from"./index-8eca1183.js";import{u as m,r as z,_ as q,l as s,S as b,R as I,C as j,I as u,U as $,a as y}from"./index-fa05e7dd.js";const F="https://qn.iruddock.com/hysli/assets/image-06a90616.png",D='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="none" stroke="#573de7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 15h7M3 15h2m0 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 0 0-5 0Zm15-6h1M3 9h7m6.5 2.5a2.5 2.5 0 1 1 0-5a2.5 2.5 0 0 1 0 5Z"/></svg>',O='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M6 22q-.825 0-1.413-.588T4 20V10q0-.825.588-1.413T6 8h9V6q0-1.25-.875-2.125T12 3q-1.025 0-1.813.613T9.126 5.15q-.125.375-.388.613T8.126 6q-.5 0-.8-.338t-.2-.762Q7.5 3.225 8.85 2.112T12 1q2.075 0 3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v10q0 .825-.588 1.413T18 22H6Zm0-2h12V10H6v10Zm6-3q.825 0 1.413-.588T14 15q0-.825-.588-1.413T12 13q-.825 0-1.413.588T10 15q0 .825.588 1.413T12 17Zm-6-7v10v-10Z"/></svg>',P='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="none" stroke="#573de7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 15h7M3 15h2m0 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 0 0-5 0Zm15-6h1M3 9h7m6.5 2.5a2.5 2.5 0 1 1 0-5a2.5 2.5 0 0 1 0 5Z"/></svg>',U='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M6 22q-.825 0-1.413-.588T4 20V10q0-.825.588-1.413T6 8h9V6q0-1.25-.875-2.125T12 3q-1.025 0-1.813.613T9.126 5.15q-.125.375-.388.613T8.126 6q-.5 0-.8-.338t-.2-.762Q7.5 3.225 8.85 2.112T12 1q2.075 0 3.538 1.463T17 6v2h1q.825 0 1.413.588T20 10v10q0 .825-.588 1.413T18 22H6Zm0-2h12V10H6v10Zm6-3q.825 0 1.413-.588T14 15q0-.825-.588-1.413T12 13q-.825 0-1.413.588T10 15q0 .825.588 1.413T12 17Zm-6-7v10v-10Z"/></svg>',Z='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 6.75V12h4V8h1v4c0 .55-.45 1-1 1H7v3l-5.45-2.72c-.33-.17-.55-.52-.55-.91V1c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v3h-1V1H3l4 2v2.25L10 3v2h4v2h-4v2L7 6.75z" fill="#ef7515"/></svg>',B='<?xml version="1.0" encoding="UTF-8"?><svg   viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z" fill="#f5a623" stroke="#f5a623" stroke-width="2" stroke-linejoin="round"/><path d="M32 28L24 20L16 28" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 36V20.5" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 14H32" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',E='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><g fill="none"><g clip-path="url(#majesticonsRocket3StartLine0)"><path stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9.9 16.97l7.436-7.436a8 8 0 0 0 2.145-3.89l.318-1.401l-1.402.317a8 8 0 0 0-3.89 2.146L9.192 12.02m.707 4.95l2.122 3.535c1.178-1.178 2.828-2.828 0-5.657L9.899 16.97zm0 0l-2.828-2.829m0 0L3.536 12.02c1.178-1.179 2.828-2.829 5.656 0m-2.12 2.121l2.12-2.121M4.95 16.263s-1.703 2.54-.707 3.536c.995.996 3.535-.707 3.535-.707"/></g><defs><clipPath id="majesticonsRocket3StartLine0"><path fill="#ffffff" d="M0 0h24v24H0z"/></clipPath></defs></g></svg>',G='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="none" stroke="#573de7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 15h7M3 15h2m0 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 0 0-5 0Zm15-6h1M3 9h7m6.5 2.5a2.5 2.5 0 1 1 0-5a2.5 2.5 0 0 1 0 5Z"/></svg>',J='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 16 16"><path d="M8.854 10.147a.5.5 0 0 1 0 .707l-3 2.996a.5.5 0 1 1-.707-.707l3-2.997a.5.5 0 0 1 .707 0zM4.876 12l-.436.435a1.498 1.498 0 0 0-.293.413L4.084 13H2.5a.5.5 0 0 1-.09-.992L2.5 12h2.376zM10.5 5a.5.5 0 0 1 .496.439l.09.734a2 2 0 0 0 1.741 1.74l.734.09a.5.5 0 0 1 0 .993l-.734.09a2 2 0 0 0-1.74 1.741l-.09.734a.5.5 0 0 1-.993 0l-.09-.734a2 2 0 0 0-1.741-1.74l-.734-.09a.5.5 0 0 1 0-.993l.734-.09a2 2 0 0 0 1.74-1.741l.09-.734A.5.5 0 0 1 10.5 5zM6.086 9c.13.369.4.674.752.846l.135.059l-.095.095H2.5a.5.5 0 0 1-.09-.992L2.5 9h3.586zM10.5 7.474c-.253.42-.606.773-1.026 1.026c.42.253.773.606 1.026 1.026c.253-.42.606-.773 1.026-1.026A3.007 3.007 0 0 1 10.5 7.474zM7.5 6a.5.5 0 0 1 .257.929l-.077.037L7.408 7H2.5a.5.5 0 0 1-.09-.992L2.5 6h5zm6-3a.5.5 0 0 1 .09.992L13.5 4h-11a.5.5 0 0 1-.09-.992L2.5 3h11z" fill="#519c03" fill-rule="nonzero"/></svg>',K='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="#5249ff" d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>',Y='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="#ff9b42" d="m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11l-5 5Zm-8 4v-5h2v3h12v-3h2v5H4Z"/></svg>',W='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="#5249ff" d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>',X='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="#ff9b42" d="m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11l-5 5Zm-8 4v-5h2v3h12v-3h2v5H4Z"/></svg>',ee='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="#666" d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>',v={svg_stkj80:D,svg_a3kfop:O,svg_3icnci:P,svg_wd7ehj:U,svg_fl1rwy:Z,svg_vzfjti:B,svg_2drwe2:E,svg_thxxil:G,svg_onmg11:J,svg_n4x3mt:K,svg_wkvbxz:Y,svg_r3mu3f:W,svg_2hs0h1:X,svg_rkeg7c:ee};const{px:se,RefsManager:_e,$eval:r,$evalArray:R,$createChildContext:T}=m;class ne extends g.Component{constructor(t,_){super(t);o(this,"_dataSourceConfig",this._defineDataSourceConfig());o(this,"_dataSourceEngine",m.dataSource(this._dataSourceConfig,this,{runtimeConfig:!0,requestHandlersMap:{fetch:z()}}));o(this,"reloadDataSource",async()=>{await this._dataSourceEngine.reloadDataSource()});o(this,"utils",Object.assign({getRoute:m.createRoute("QrcodeApp")},m));o(this,"constants",q);o(this,"_refsManager",new _e);o(this,"$",t=>this._refsManager.get(t));o(this,"$$",t=>this._refsManager.getAll(t));this.state={tab:0,mode:"temp",request:{},prompt:"",qrcode_base64:"",start:60,status:"begin",check:{},lock:!0,templates:[],history:[],codeText:"",requestGenCode:{},requestEditCode:{},initing:!0}}get dataSourceMap(){return this._dataSourceEngine.dataSourceMap||{}}_defineDataSourceConfig(){const t=this;return{list:[{id:"request",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){return{uri:t.constants.HostDomain+"/ai-qrcode_add-qrcode",contentType:"JSON",method:"POST",params:{start:((100-t.state.start)*.01).toFixed(2)*1,prompt:t.state.mode==="prompt"?t.state.engPrompt||t.state.prompt:"",qrcode_base64:t.state.qrcode_base64,appid:t.constants.qrCodeAppId,templateId:t.state.mode==="temp"?t.state.templateId:""},headers:{},timeout:15e3}}},{id:"check",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){var _,a;return{uri:t.constants.HostDomain+`/ai-qrcode_get-qrcode?requestId=${(a=(_=t.state.request)==null?void 0:_.data)==null?void 0:a.requestId}`,contentType:"JSON",method:"GET",params:{},headers:{},timeout:15e3}}},{id:"templates",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){return{uri:t.constants.HostDomain+"/ai-qrcode_getTemplateList",contentType:"JSON",method:"POST",params:{appid:t.constants.qrCodeAppId},headers:{}}},dataHandler:function(a){return a.data.data}},{id:"translate",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){return{uri:t.constants.HostDomain+`/ai-qrcode_trans?prompt=${t.state.prompt}`,contentType:"JSON",method:"POST",params:{prompt:t.state.prompt},headers:{},timeout:15e3}},dataHandler:function(a){var i;return(i=a.data.data)==null?void 0:i.prompt}},{id:"history",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){return{uri:t.constants.HostDomain+"/ai-qrcode_web-controllers",contentType:"JSON",method:"POST",params:{mode:"getAiQRCodeRecordHistory",param:{appId:t.constants.qrCodeAppId}},headers:{}}},dataHandler:function(a){var i;return(i=a.data.data)==null?void 0:i.content}},{id:"requestGenCode",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){return{uri:t.constants.HostDomain+"/ai-qrcode_generateQrcode",contentType:"JSON",method:"POST",params:{mode:"generate",param:{text:t.state.codeText}},headers:{},timeout:15e3}},dataHandler:function(a){var i;return(i=a.data.data)==null?void 0:i.new_qrcode}},{id:"requestEditCode",isInit:function(){return!1},isSync:!1,type:"fetch",options:function(){return{uri:t.constants.HostDomain+"/ai-qrcode_generateQrcode",contentType:"JSON",method:"POST",params:{mode:"redraw",param:{base64:"data:image/png;base64,"+t.state.qrcode_base64}},headers:{},timeout:15e3}},dataHandler:function(a){var i;return(i=a.data.data)==null?void 0:i.new_qrcode}}]}}setStateValue(t,{field:_,valueField:a,indexs:i},l){const c={...this.state};let n=t;a&&(n=a.split(".").reduce((w,h)=>w&&w[h],t));const p=(i==null?void 0:i.length)>0?_.replace(/\.\[\]/g,w=>`[${i.shift()}].`).replace(".[item]",""):_;this.utils.setValue(c,p,n),(_==="prompt"||_==="templateId")&&this.state.status==="finish"&&(c.status="begin"),_==="prompt"&&(c.engPrompt="",c.transSourceText=""),this.setState(c,l)}async uploadQrCode({file:t}){this.utils.checkForLogin().then(async()=>{const _=Date.now();if(_-this.debounceTime<1e3)return;this.debounceTime=_;const a=t==null?void 0:t.originFileObj;if(a){if(a.size>1024*1024)return this.utils.message.error("图片文件大小不可大于1M");if(!["image/jpeg","image/jpg","image/png"].includes(a.type))return this.utils.message.error("请选择jpg、jpeg或png格式的图片");const c=new FileReader;c.onload=()=>{const n=c.result.replace(/^data:.+;base64,/,"");this.setState({qrcode_base64:n,lock:!0,start:65},async()=>{var p;try{const w=await((p=this.dataSourceMap.requestEditCode)==null?void 0:p.load());w&&(this.setState({qrcode_base64:w.split(";base64,")[1]}),this.utils.message.success("已对您的二维码进行优化"))}catch{}})},c.readAsDataURL(a)}}).catch(_=>{console.log("error: ",_),this.utils.redirectTo("login")})}async generate(t,{lockStyle:_}){const a=Date.now();if(a-this.lastClick<1e3)return this.utils.message.info("知道你很急，但是请别急");this.lastClick=a;const{templateId:i,prompt:l,engPrompt:c,mode:n,qrcode_base64:p,status:w}=this.state;if(n==="temp"&&!i)return this.utils.message.error("请选择内置样式模板");if(n==="prompt"&&!l)return this.utils.message.error("请输入提示词");if(w==="working")return this.utils.message.error("正在绘制中，请等待");if(!p)return this.utils.message.error("请上传/生成二维码");if(n==="prompt"&&!c&&l&&this.checkHasChinese(l))return this.utils.message.error("翻译中请稍等");this.setState({status:"working"},async()=>{var A,k,M,N,V,Q;const h=await((V=this.dataSourceMap.request)==null?void 0:V.load(this.state.lock&&((k=(A=this.state.check)==null?void 0:A.data)!=null&&k.seed)?{seed:(N=(M=this.state.check)==null?void 0:M.data)==null?void 0:N.seed}:{}));(Q=h==null?void 0:h.data)!=null&&Q.requestId?(this.utils.message.info("开始绘制，请稍等"),setTimeout(()=>{this.startTime=Date.now(),this.checkGeneratedResults()},2e3)):(this.utils.message.error(h.msg||"绘制失败，稍后重试"),this.setState({status:"begin"}))})}downloadPicture(t){this.props.isMobile&&this.utils.message.info("微信中请长按图片保存到手机"),fetch(t).then(_=>_.blob()).then(_=>{this.utils.message.success("开始下载，请等候");const a=URL.createObjectURL(_),i=document.createElement("a");i.href=a,i.download="image.jpg",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)})}async checkGeneratedResults(){var t,_,a,i,l;try{const c=await((t=this.dataSourceMap.check)==null?void 0:t.load());if((_=c==null?void 0:c.data)!=null&&_.fileUrl)this.setState({status:"finish"}),(a=this.$("autolist"))==null||a.refresh();else{if(typeof this.startTime=="number"&&Date.now()-this.startTime>18e4)return this.startTime=null,this.setState({status:"begin"}),(i=this.$("autolist"))==null||i.refresh(),this.utils.message.error("生成失败，请稍后重试");setTimeout(()=>{this.checkGeneratedResults()},1e4)}}catch{return this.startTime=null,this.setState({status:"begin"}),(l=this.$("autolist"))==null||l.refresh(),this.utils.message.error("生成失败，请稍后重试")}}checkHasChinese(t){const _=t.match(/[^\x00-\x80]/g);return _&&_.length>0}async detectionTranslation(t){var i,l;const _=(i=t==null?void 0:t.target)==null?void 0:i.value;if(!_||_===this.state.transSourceText)return;const a=this.checkHasChinese(_);if(_&&a){const c=this.utils.message.loading("自动翻译中"),n=await((l=this.dataSourceMap.translate)==null?void 0:l.load());c==null||c(),this.setState({lock:!0,transSourceText:_,engPrompt:n})}}async textToQrCode(t){this.utils.checkForLogin().then(async()=>{var _;if(this.state.qrcode_base64)return this.setState({qrcode_base64:""});try{const a=this.utils.message.loading("请稍等"),i=await((_=this.dataSourceMap.requestGenCode)==null?void 0:_.load());a();const l=i.split(";base64,")[1];this.setState({qrcode_base64:l})}catch{this.utils.message.error("生成失败，请稍后重试")}}).catch(_=>{console.log("error: ",_),this.utils.redirectTo("login")})}queryHistory(){var t;(t=this.$("autolist"))==null||t.refresh(),setTimeout(()=>{var a,i;((i=(a=this.state.history)==null?void 0:a.find)==null?void 0:i.call(a,l=>{var c;return!((c=l==null?void 0:l.url)!=null&&c.fileUrl)}))&&setTimeout(()=>{this.queryHistory()},5e3)},500)}async async_componentDidMount(){var t;this.utils.checkForLogin().then(()=>{this.setState({initing:!1,userInfo:this.utils.getGlobalData("userInfo")}),this.queryHistory()}).catch(_=>{this.setState({initing:!1})}),(t=this.dataSourceMap.templates)==null||t.load().then(()=>{var _;(_=this.state.templates[0])!=null&&_._id&&this.setState({templateId:this.state.templates[0]._id},()=>{})})}componentDidMount(){this._dataSourceEngine.reloadDataSource(),this.async_componentDidMount()}render(){const t=this;return e.jsxs(g.Fragment,{children:[e.jsx(s.Modal,{style:{},animate:"pop",renderView:_=>e.jsxs(s.View,{className:"QrcodeApp__vw",children:[e.jsx(s.View,{className:"QrcodeApp__vw__vw",children:e.jsx(s.View,{className:"QrcodeApp__vw__vw__vw",children:e.jsx(s.Text,{className:"QrcodeApp__vw__vw__vw__tx",children:"优化选项"})})}),e.jsx(s.View,{className:"QrcodeApp__vw__vw1",children:e.jsx(s.View,{className:"QrcodeApp__vw__vw1__vw",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-f1dd3381"),className:"QrcodeApp__vw__vw1__vw__vw",children:[e.jsxs(s.View,{className:"QrcodeApp__vw__vw1__vw__vw__vw",children:[e.jsx(s.AtIcon,{color:"#573de7",size:22,svg:v.svg_stkj80}),e.jsx(s.Text,{className:"QrcodeApp__vw__vw1__vw__vw__vw__tx1",children:"二维码强调程度（推荐：60-80）"})]}),e.jsxs(s.View,{ref:this._refsManager.linkRef("view-2d063363"),className:"QrcodeApp__vw__vw1__vw__vw__vw1",children:[e.jsx(s.View,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw",children:e.jsx(s.Text,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw__tx",children:"更艺术"})}),e.jsx(s.View,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw1 M-flex-item",children:e.jsx(b,{defaultValue:30,range:!1,disabled:!1,dots:!1,reverse:!1,vertical:!1,allowClear:!1,max:100,min:1,value:r(()=>t.state.start),onChange:function(){return this.setStateValue.apply(this,Array.prototype.slice.call(arguments).concat([{field:"start"}]))}.bind(t)})}),e.jsx(s.View,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw2",children:e.jsx(s.Text,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw2__tx",children:r(()=>t.state.start)})}),e.jsx(s.View,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw3",children:e.jsx(s.Text,{className:"QrcodeApp__vw__vw1__vw__vw__vw1__vw3__tx",children:"更易扫码"})})]})]})})}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-7cf83899"),className:"QrcodeApp__vw__vw2 M-flex-item",children:e.jsx(s.View,{className:"QrcodeApp__vw__vw2__vw",children:e.jsxs(s.View,{className:"QrcodeApp__vw__vw2__vw__vw",children:[e.jsx(s.Text,{className:"QrcodeApp__vw__vw2__vw__vw__tx",children:"锁定背景图"}),e.jsx(s.View,{inlineStyle:[{enable:r(()=>!t.state.lock),name:"动态样式1",style:{backgroundColor:"#e4e4e4"}}],onClick:a=>{t.setStateValue(!t.state.lock,{field:"lock"})},className:"QrcodeApp__vw__vw2__vw__vw__vw1",children:e.jsxs(s.View,{className:"QrcodeApp__vw__vw2__vw__vw__vw1__vw",children:[e.jsx(s.AtIcon,{color:r(()=>t.state.lock?"#fff":"#666"),size:15,svg:v.svg_a3kfop,className:"QrcodeApp__vw__vw2__vw__vw__vw1__vw__AtIcon"}),e.jsx(s.Text,{inlineStyle:[{enable:r(()=>!t.state.lock),name:"动态样式1",style:{color:"#666666"}}],className:"QrcodeApp__vw__vw2__vw__vw__vw1__vw__tx1",children:r(()=>t.state.lock?"锁定":"未锁定")})]})})]})})}),e.jsxs(s.View,{className:"QrcodeApp__vw__vw3",children:[e.jsx(s.View,{className:"QrcodeApp__vw__vw3__vw M-gb-click",onClick:a=>{var i;(i=t.$("modal1"))==null||i.close()},children:e.jsx(s.Text,{className:"QrcodeApp__vw__vw3__vw__tx",children:"取消"})}),e.jsx(s.View,{onClick:a=>{var i;t.generate(a,{lockStyle:!1}),(i=t.$("modal1"))==null||i.close()},className:"QrcodeApp__vw__vw3__vw1 M-gb-click",children:e.jsx(s.Text,{className:"QrcodeApp__vw__vw3__vw1__tx",children:"重绘"})})]})]}),visible:!1,maskClosable:!0,ref:this._refsManager.linkRef("modal1")}),e.jsx(s.Modal,{style:{},animate:"slide-bottom",renderView:_=>e.jsxs(s.View,{className:"QrcodeApp__vw_1",children:[e.jsx(s.View,{className:"QrcodeApp__vw_1__vw",children:e.jsx(s.View,{className:"QrcodeApp__vw_1__vw__vw",children:e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw__vw__tx",children:"优化选项"})})}),e.jsx(s.View,{className:"QrcodeApp__vw_1__vw1",children:e.jsx(s.View,{className:"QrcodeApp__vw_1__vw1__vw",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-f1dd3381"),className:"QrcodeApp__vw_1__vw1__vw__vw",children:[e.jsxs(s.View,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw",children:[e.jsx(s.AtIcon,{color:"#573de7",size:22,svg:v.svg_3icnci}),e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw__tx1",children:"二维码强调程度（推荐：60-80）"})]}),e.jsxs(s.View,{ref:this._refsManager.linkRef("view-2d063363"),className:"QrcodeApp__vw_1__vw1__vw__vw__vw1",children:[e.jsx(s.View,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw",children:e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw__tx",children:"更艺术"})}),e.jsx(s.View,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw1 M-flex-item",children:e.jsx(b,{defaultValue:30,range:!1,disabled:!1,dots:!1,reverse:!1,vertical:!1,allowClear:!1,max:100,min:1,value:r(()=>t.state.start),onChange:function(){return this.setStateValue.apply(this,Array.prototype.slice.call(arguments).concat([{field:"start"}]))}.bind(t)})}),e.jsx(s.View,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw2",children:e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw2__tx",children:r(()=>t.state.start)})}),e.jsx(s.View,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw3",children:e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw1__vw__vw__vw1__vw3__tx",children:"更易扫码"})})]})]})})}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-7cf83899"),className:"QrcodeApp__vw_1__vw2 M-flex-item",children:e.jsx(s.View,{className:"QrcodeApp__vw_1__vw2__vw",children:e.jsxs(s.View,{className:"QrcodeApp__vw_1__vw2__vw__vw",children:[e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw2__vw__vw__tx",children:"锁定背景图"}),e.jsx(s.View,{inlineStyle:[{enable:r(()=>!t.state.lock),name:"动态样式1",style:{backgroundColor:"#e4e4e4"}}],onClick:a=>{t.setStateValue(!t.state.lock,{field:"lock"})},className:"QrcodeApp__vw_1__vw2__vw__vw__vw1",children:e.jsxs(s.View,{className:"QrcodeApp__vw_1__vw2__vw__vw__vw1__vw",children:[e.jsx(s.AtIcon,{color:r(()=>t.state.lock?"#fff":"#666"),size:15,svg:v.svg_wd7ehj,className:"QrcodeApp__vw_1__vw2__vw__vw__vw1__vw__AtIcon"}),e.jsx(s.Text,{inlineStyle:[{enable:r(()=>!t.state.lock),name:"动态样式1",style:{color:"#666666"}}],className:"QrcodeApp__vw_1__vw2__vw__vw__vw1__vw__tx1",children:r(()=>t.state.lock?"锁定":"未锁定")})]})})]})})}),e.jsxs(s.View,{className:"QrcodeApp__vw_1__vw3",children:[e.jsx(s.View,{className:"QrcodeApp__vw_1__vw3__vw M-gb-click",onClick:a=>{var i;(i=t.$("youhua_mobile"))==null||i.close()},ref:this._refsManager.linkRef("view-5b268ffa"),children:e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw3__vw__tx",children:"取消"})}),e.jsx(s.View,{onClick:a=>{var i;t.generate(a,{lockStyle:!1}),(i=t.$("youhua_mobile"))==null||i.close()},className:"QrcodeApp__vw_1__vw3__vw1 M-gb-click",children:e.jsx(s.Text,{className:"QrcodeApp__vw_1__vw3__vw1__tx",children:"重绘"})})]})]}),visible:!1,maskClosable:!0,ref:this._refsManager.linkRef("youhua_mobile")}),e.jsxs(s.View,{ref:this._refsManager.linkRef("view-91c1eb67"),className:"QrcodeApp__two-dimensional_code__vw2",children:[e.jsx(s.View,{ref:this._refsManager.linkRef("view-aeb47d89"),className:"QrcodeApp__two-dimensional_code__vw2__vw M-flex-item",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-2f9901d0"),className:"QrcodeApp__two-dimensional_code__vw2__vw__vw M-flex-item",children:[e.jsx(s.View,{className:"QrcodeApp__two-dimensional_code__vw2__vw__vw__vw",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-4572ad61"),className:"QrcodeApp__two-dimensional_code__vw2__vw__vw__vw__vw M-flex-item",children:[e.jsx(s.ImageBackground,{src:"https://file.mengti.cc/FpNeCSgcSyFfVj8PeqQiCjZJYpKf",className:"QrcodeApp__two-dimensional_code__vw2__vw__vw__vw__vw__ibg"}),e.jsx(s.Text,{className:"QrcodeApp__two-dimensional_code__vw2__vw__vw__vw__vw__tx1",children:"ArtQR 智绘二维码"})]})}),e.jsx(s.ScrollView,{ref:this._refsManager.linkRef("scrollview"),className:"QrcodeApp__two-dimensional_code__vw2__vw__vw__sv1 M-flex-item",children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-395bf5b5"),className:"QrcodeApp__two-dimensional_code__vw2__vw__vw__sv1__vw",children:e.jsxs(I,{align:"top",justify:"start",wrap:!0,"h-gutter":20,"v-gutter":20,gutter:[20,20],ref:this._refsManager.linkRef("row-d8b2893d"),children:[e.jsxs(j,{span:12,order:0,xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:[e.jsx(s.View,{style:{},children:e.jsxs(s.View,{className:"QrcodeApp__vw_2",children:[!!r(()=>{var _;return!this.state.initing&&!((_=this.state.userInfo)!=null&&_.username)})&&e.jsx(s.View,{onClick:_=>{this.state.initing||this.utils.navigateTo("login")},ref:this._refsManager.linkRef("view-ec050aaa"),className:"QrcodeApp__vw_2__vw",children:!!r(()=>this.state.status==="begin")&&e.jsxs(s.View,{className:"QrcodeApp__vw_2__vw__vw M-gb-click",ref:this._refsManager.linkRef("view-6c2bb9f8"),children:[e.jsx(s.View,{ref:this._refsManager.linkRef("view-5ff3e1bb"),className:"QrcodeApp__vw_2__vw__vw__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#ef7515",size:30,svg:v.svg_fl1rwy})}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-295df367"),children:e.jsx(s.Text,{ref:this._refsManager.linkRef("text-4ee23d1f"),className:"QrcodeApp__tx",children:"点击登录"})})]})}),e.jsxs(s.View,{className:"QrcodeApp__vw_2__vw1",children:[e.jsx(s.Text,{className:"QrcodeApp__vw_2__vw1__tx",children:"1."}),e.jsx(s.Text,{className:"QrcodeApp__vw_2__vw1__tx1",children:"原始二维码"})]}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-8d7af1d4"),children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-d2f5b4de"),children:e.jsx(s.View,{className:"QrcodeApp__vw_3",children:e.jsxs(s.View,{className:"QrcodeApp__vw_3__vw",children:[e.jsx(s.View,{className:"QrcodeApp__vw_3__vw__vw",children:e.jsxs(s.View,{className:"QrcodeApp__vw_3__vw__vw__vw",children:[!1,!!r(()=>!this.state.qrcode_base64)&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-b078e8e5"),className:"QrcodeApp__vw_3__vw__vw__vw__vw1",children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-d901d310"),className:"QrcodeApp__vw_3__vw__vw__vw__vw1__vw M-flex-item",children:e.jsx(u,{type:"text",confirmType:"done",value:r(()=>this.state.codeText),placeholder:"可输入网址、文本",password:!1,bordered:!1,disabled:!1,ref:this._refsManager.linkRef("input-44732fb9"),onChange:function(){return this.setStateValue.apply(this,Array.prototype.slice.call(arguments).concat([{field:"codeText",valueField:"target.value"}]))}.bind(this),className:"QrcodeApp__vw_3__vw__vw__vw__vw1__vw__Input"})})}),!!r(()=>this.state.qrcode_base64)&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-a1f34fc2"),className:"QrcodeApp__vw_3__vw__vw__vw__vw2",children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-bc336ca3"),className:"QrcodeApp__vw_3__vw__vw__vw__vw2__vw M-flex-item",children:e.jsx(s.Image,{src:r(()=>"data:image/png;base64,"+this.state.qrcode_base64),remote:!1,fit:!1,ref:this._refsManager.linkRef("image-a3743d54"),className:"QrcodeApp__vw_3__vw__vw__vw__vw2__vw__Image"})})})]})}),e.jsxs(s.View,{className:"QrcodeApp__vw_3__vw__vw1",children:[e.jsxs(s.View,{ref:this._refsManager.linkRef("view-8e0eb5f6"),className:"QrcodeApp__vw_3__vw__vw1__vw M-flex-item",children:[!!r(()=>!!this.state.codeText)&&e.jsx(s.View,{className:"QrcodeApp__vw_3__vw__vw1__vw__vw M-gb-click",ref:this._refsManager.linkRef("view-75407b22"),onClick:function(){return this.textToQrCode.apply(this,Array.prototype.slice.call(arguments).concat([]))}.bind(this),children:e.jsx(s.Text,{ref:this._refsManager.linkRef("text-be7e3b3c"),className:"QrcodeApp__vw_3__vw__vw1__vw__vw__tx",children:r(()=>this.state.qrcode_base64?"重新修改":"立即生成")})}),!!r(()=>!this.state.codeText)&&e.jsx($,{multiple:!1,directory:!1,disabled:!1,openFileDialogOnClick:!0,showUploadList:!1,listType:"text",method:"post",withCredentials:!1,defaultFileList:[],maxCount:1,headers:r(()=>{var _;return{Authorization:"Bearer "+((_=this.constants.accessTicket)==null?void 0:_.accessToken)}}),onChange:function({}){this.uploadQrCode(arguments[0])}.bind(this),accept:"jpg,jpeg,png",ref:this._refsManager.linkRef("upload-dbecd671"),children:e.jsxs(s.View,{className:"QrcodeApp__vw_4 M-gb-click",ref:this._refsManager.linkRef("view-915dfecf"),children:[e.jsx(s.AtIcon,{color:"#666",size:22,svg:v.svg_vzfjti}),e.jsx(s.Text,{className:"QrcodeApp__vw_4__tx1",children:"上传二维码"})]})}),e.jsx(s.View,{className:"QrcodeApp__vw_3__vw__vw1__vw__vw2 M-gb-click",ref:this._refsManager.linkRef("view-dc3e0db4"),onClick:_=>{this.setState({codeText:"",qrcode_base64:""})},children:e.jsx(s.Text,{className:"QrcodeApp__vw_3__vw__vw1__vw__vw2__tx",children:"清空"})})]}),e.jsx(s.View,{className:"QrcodeApp__vw_3__vw__vw1__vw1"})]})]})})})})]})}),e.jsx(s.View,{className:"QrcodeApp__vw1",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-b94871a8"),className:"QrcodeApp__vw1__vw",children:[e.jsxs(s.View,{ref:this._refsManager.linkRef("view-8d728f6d"),className:"QrcodeApp__vw1__vw__vw",children:[e.jsxs(s.View,{ref:this._refsManager.linkRef("view-3c521404"),className:"QrcodeApp__vw1__vw__vw__vw",children:[e.jsx(s.Text,{className:"QrcodeApp__vw1__vw__vw__vw__tx",children:"2."}),e.jsx(s.Text,{className:"QrcodeApp__vw1__vw__vw__vw__tx1",children:"绘画"})]}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-26f8695f"),className:"QrcodeApp__vw1__vw__vw__vw1 M-flex-item",children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-cb4a638f"),className:"QrcodeApp__vw1__vw__vw__vw1__vw",children:R(()=>[{label:"内置样式",value:"temp"},{label:"绘画模式",value:"prompt"}]).map((_,a)=>(i=>e.jsx(s.View,{className:"QrcodeApp__vw1__vw__vw__vw1__vw__vw M-gb-click",inlineStyle:[{enable:r(()=>i.state.mode===(_==null?void 0:_.value)),name:"动态样式1",style:{backgroundColor:"#5161fe"}}],onClick:l=>{i.state.status!=="working"&&i.setStateValue(_==null?void 0:_.value,{field:"mode"})},ref:this._refsManager.linkRef("view-7d89758f"),children:e.jsx(s.Text,{inlineStyle:[{enable:r(()=>i.state.mode===(_==null?void 0:_.value)),name:"动态样式1",style:{color:"#ffffff"}}],ref:this._refsManager.linkRef("text-92d069ed"),className:"QrcodeApp__vw1__vw__vw__vw1__vw__vw__tx",children:r(()=>_==null?void 0:_.label)})}))(T(t,{item:_,index:a})))})})]}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-8d7af1d4"),children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-d2f5b4de"),children:[!!r(()=>this.state.mode==="temp")&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-b113fd26"),className:"QrcodeApp__vw_5",children:!!r(()=>{var _;return((_=this.state.templates)==null?void 0:_.length)>0})&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-21ff31fa"),className:"QrcodeApp__vw_5__vw",children:R(()=>this.state.templates).map((_,a)=>(i=>e.jsxs(s.View,{ref:this._refsManager.linkRef("view-4d763f44"),inlineStyle:[{enable:r(()=>(_==null?void 0:_._id)===i.state.templateId),name:"动态样式1",style:{borderWidth:se(2),borderColor:"#300afe",borderStyle:"solid"}}],onClick:l=>{i.state.status!=="working"&&i.setState({templateId:_==null?void 0:_._id,start:60,lock:!0})},className:"QrcodeApp__vw_5__vw__vw M-gb-click",children:[e.jsx(s.Image,{src:r(()=>_==null?void 0:_.url),remote:!1,fit:!1,ref:this._refsManager.linkRef("image-dae3023e"),className:"QrcodeApp__vw_5__vw__vw__Image"}),e.jsx(s.View,{className:"QrcodeApp__vw_5__vw__vw__vw1",children:e.jsx(s.Text,{className:"QrcodeApp__vw_5__vw__vw__vw1__tx",children:r(()=>_==null?void 0:_.desc)})})]}))(T(t,{item:_,index:a})))})}),!!r(()=>this.state.mode==="prompt")&&e.jsxs(s.View,{ref:this._refsManager.linkRef("view-fb16809b"),className:"QrcodeApp__vw1_6",children:[e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw"}),e.jsxs(s.View,{className:"QrcodeApp__vw1_6__vw1",children:[e.jsx(s.View,{style:{},children:e.jsx(s.Text,{className:"QrcodeApp__tx_7",children:"提示词"})}),e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw1__vw1 M-flex-item"})]}),e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw2",children:e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw2__vw M-flex-item",children:e.jsx(u.TextArea,{autoSize:{minRows:4,maxRows:3},placeholder:"写下您的创意，建议使用英文描述",bordered:!1,disabled:r(()=>this.state.status==="working"),showCount:!1,style:{},value:r(()=>this.state.prompt),onChange:function(){return this.setStateValue.apply(this,Array.prototype.slice.call(arguments).concat([{field:"prompt",valueField:"target.value"}]))}.bind(this),ref:this._refsManager.linkRef("input.textarea-ea54464e"),onBlur:function(){return this.detectionTranslation.apply(this,Array.prototype.slice.call(arguments).concat([]))}.bind(this)})})}),!!r(()=>!!this.state.engPrompt)&&e.jsxs(s.View,{ref:this._refsManager.linkRef("view-1aa98743"),className:"QrcodeApp__vw1_6__vw3",children:[e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw3__vw",children:e.jsx(s.Text,{className:"QrcodeApp__vw1_6__vw3__vw__tx",children:"自动翻译"})}),e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw3__vw1",children:e.jsx(s.View,{className:"QrcodeApp__vw1_6__vw3__vw1__vw M-flex-item",children:e.jsx(u.TextArea,{autoSize:{minRows:4,maxRows:3},placeholder:"自动翻译中文",bordered:!1,disabled:r(()=>this.state.status==="working"),showCount:!1,style:{},value:r(()=>this.state.engPrompt),onChange:function(){return this.setStateValue.apply(this,Array.prototype.slice.call(arguments).concat([{field:"engPrompt",valueField:"target.value"}]))}.bind(this),ref:this._refsManager.linkRef("input.textarea-cd325")})})})]})]})]})})]})})]}),e.jsx(j,{span:12,order:0,xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,ref:this._refsManager.linkRef("col-1bffee9b"),className:"QrcodeApp__Col1",children:e.jsx(s.View,{style:{},children:e.jsxs(s.View,{className:"QrcodeApp__vw_8",children:[e.jsxs(s.View,{className:"QrcodeApp__vw_8__vw",children:[e.jsxs(s.View,{className:"QrcodeApp__vw_8__vw__vw",children:[e.jsx(s.Text,{className:"QrcodeApp__vw_8__vw__vw__tx",children:"3."}),e.jsx(s.Text,{className:"QrcodeApp__vw_8__vw__vw__tx1",children:"开始绘制"})]}),e.jsx(s.View,{className:"QrcodeApp__vw_8__vw__vw1 M-flex-item"})]}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-8d7af1d4"),children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-d2f5b4de"),children:[e.jsxs(s.View,{ref:this._refsManager.linkRef("view-4ef577fe"),className:"QrcodeApp__vw_9",children:[!!r(()=>this.state.status!=="finish")&&e.jsxs(s.View,{ref:this._refsManager.linkRef("view-7656d2b2"),className:"QrcodeApp__vw_9__vw",children:[!!r(()=>this.state.status==="working")&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-49343f2d"),children:e.jsx(y,{size:"large",tip:"",delay:0,indicator:"",spinning:!0,wrapperClassName:"",ref:this._refsManager.linkRef("spin-46744f46")})}),!!r(()=>this.state.status==="begin")&&e.jsxs(s.View,{className:"QrcodeApp__vw_9__vw__vw1 M-gb-click",ref:this._refsManager.linkRef("view-6c2bb9f8"),onClick:function(){return this.generate.apply(this,Array.prototype.slice.call(arguments).concat([{lockStyle:!1}]))}.bind(this),children:[e.jsx(s.View,{ref:this._refsManager.linkRef("view-5ff3e1bb"),className:"QrcodeApp__vw_9__vw__vw1__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#ffffff",size:30,svg:v.svg_2drwe2,ref:this._refsManager.linkRef("aticon-69c1ac27")})}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-295df367"),children:e.jsx(s.Text,{ref:this._refsManager.linkRef("text-4ee23d1f"),className:"QrcodeApp__tx_10",children:"开始绘制"})})]})]}),e.jsxs(s.View,{ref:this._refsManager.linkRef("view-b02a5626"),onClick:_=>{var a,i;this.props.isMobile||this.state.status==="finish"&&this.setStateValue((i=(a=this.state.check)==null?void 0:a.data)==null?void 0:i.fileUrl,{field:"previewImgUrl"},()=>{var l;(l=this.$("modal"))==null||l.open()})},className:"QrcodeApp__vw_9__vw1",children:[e.jsx(s.Image,{src:F,remote:!1,fit:!1,ref:this._refsManager.linkRef("image-3fcbc46a"),className:"QrcodeApp__vw_9__vw1__Image"}),!!r(()=>{var _,a;return!!((a=(_=this.state.check)==null?void 0:_.data)!=null&&a.fileUrl)})&&e.jsx(s.Image,{src:r(()=>{var _,a;return(a=(_=this.state.check)==null?void 0:_.data)==null?void 0:a.fileUrl}),remote:!1,fit:!1,ref:this._refsManager.linkRef("image-3fcbc46a"),className:"QrcodeApp__vw_9__vw1__Image1"})]})]}),!1,e.jsxs(s.View,{className:"QrcodeApp__vw2",children:[!!r(()=>this.state.status==="finish"&&!1)&&e.jsxs(s.View,{ref:this._refsManager.linkRef("view-85d0302c"),className:"QrcodeApp__vw2__vw",children:[e.jsxs(s.View,{className:"QrcodeApp__vw2__vw__vw M-gb-click M-flex-item",ref:this._refsManager.linkRef("view-6c2bb"),onClick:function(){return this.generate.apply(this,Array.prototype.slice.call(arguments).concat([{lockStyle:!0}]))}.bind(this),children:[e.jsx(s.View,{className:"QrcodeApp__vw2__vw__vw__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#519c03",size:24,svg:v.svg_onmg11})}),e.jsx(s.View,{children:e.jsx(s.Text,{className:"QrcodeApp__tx_12",children:"微调"})})]}),e.jsxs(s.View,{className:"QrcodeApp__vw2__vw__vw1 M-gb-click M-flex-item",ref:this._refsManager.linkRef("view-6c2bb9f8"),onClick:function(){return this.generate.apply(this,Array.prototype.slice.call(arguments).concat([{lockStyle:!1}]))}.bind(this),children:[e.jsx(s.View,{className:"QrcodeApp__vw2__vw__vw1__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#5249ff",size:30,svg:v.svg_n4x3mt})}),e.jsx(s.View,{children:e.jsx(s.Text,{className:"QrcodeApp__tx_13",children:"重新绘制"})})]}),e.jsxs(s.View,{className:"QrcodeApp__vw2__vw__vw2 M-gb-click",onClick:_=>{var a,i;this.downloadPicture((i=(a=this.state.check)==null?void 0:a.data)==null?void 0:i.fileUrl)},children:[e.jsx(s.View,{className:"QrcodeApp__vw2__vw__vw2__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#ff9b42",size:28,svg:v.svg_wkvbxz})}),e.jsx(s.View,{children:e.jsx(s.Text,{className:"QrcodeApp__tx_14",children:"下载"})})]})]}),!!r(()=>this.state.status==="finish")&&e.jsxs(s.View,{ref:this._refsManager.linkRef("view-85d0302c"),className:"QrcodeApp__vw2__vw1",children:[e.jsxs(s.View,{className:"QrcodeApp__vw2__vw1__vw M-gb-click M-flex-item",ref:this._refsManager.linkRef("view-6c2bb9f8"),onClick:_=>{var a;(a=this.$(this.props.isMobile?"youhua_mobile":"modal1"))==null||a.open()},children:[e.jsx(s.View,{className:"QrcodeApp__vw2__vw1__vw__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#5249ff",size:30,svg:v.svg_r3mu3f})}),e.jsx(s.View,{children:e.jsx(s.Text,{className:"QrcodeApp__tx_15",children:"重新绘制"})})]}),e.jsxs(s.View,{className:"QrcodeApp__vw2__vw1__vw1 M-gb-click",onClick:_=>{var a,i;this.downloadPicture((i=(a=this.state.check)==null?void 0:a.data)==null?void 0:i.fileUrl)},children:[e.jsx(s.View,{className:"QrcodeApp__vw2__vw1__vw1__vw M-flex-item",children:e.jsx(s.AtIcon,{color:"#ff9b42",size:28,svg:v.svg_2hs0h1})}),e.jsx(s.View,{children:e.jsx(s.Text,{className:"QrcodeApp__tx_16",children:"下载"})})]})]}),!!r(()=>this.state.status==="finish")&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-e64e418e"),className:"QrcodeApp__vw2__vw2",children:e.jsx(s.Text,{className:"QrcodeApp__vw2__vw2__tx",children:"提示: 图片效果不理想或无法扫码，可点击重新绘制"})})]})]})})]})})})]})})})]})}),!!r(()=>{var _;return!((_=this.props)!=null&&_.isMobile)})&&e.jsxs(s.View,{ref:this._refsManager.linkRef("view-2d027e0e"),className:"QrcodeApp__two-dimensional_code__vw2__vw1",children:[e.jsx(s.View,{className:"QrcodeApp__two-dimensional_code__vw2__vw1__vw",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-4572ad61"),className:"QrcodeApp__two-dimensional_code__vw2__vw1__vw__vw M-flex-item",children:[e.jsx(s.Text,{className:"QrcodeApp__two-dimensional_code__vw2__vw1__vw__vw__tx",children:"历史记录"}),e.jsx(s.View,{className:"QrcodeApp__two-dimensional_code__vw2__vw1__vw__vw__vw1 M-gb-click",ref:this._refsManager.linkRef("view-e3ed6a0f"),onClick:_=>{var a;(a=this.$("autolist"))==null||a.refresh()},children:e.jsx(s.AtIcon,{color:"#666",size:24,svg:v.svg_rkeg7c,ref:this._refsManager.linkRef("aticon-d4e959d0")})})]})}),e.jsx(s.AutoList,{dataSource:(_,a)=>this.dataSourceMap.history.load({param:{appId:this.constants.qrCodeAppId,page:_,pageSize:a,sort:"id,asc"}}),autoFetch:!1,mode:"scroll",pageMode:"auto",emptyText:"",footerMarginTop:0,pageSize:10,renderItem:(_,a,i)=>e.jsx(s.View,{children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-8d7af1d4"),className:"QrcodeApp__vw_17",children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-d2f5b4de"),children:e.jsxs(s.View,{onClick:l=>{var c;t.props.isMobile||t.setStateValue((c=_==null?void 0:_.url)==null?void 0:c.fileUrl,{field:"previewImgUrl"},()=>{var n;(n=t.$("modal"))==null||n.open()})},className:"QrcodeApp__vw_18",children:[e.jsx(s.View,{className:"QrcodeApp__vw_18__vw",children:!!r(()=>{var l;return!((l=_==null?void 0:_.url)!=null&&l.fileUrl)})&&e.jsx(y,{size:"default",tip:"",delay:0,indicator:"",spinning:!0,wrapperClassName:"",ref:this._refsManager.linkRef("spin-c0b8c832")})}),e.jsx(s.Image,{src:r(()=>{var l;return(l=_==null?void 0:_.url)==null?void 0:l.fileUrl}),remote:!1,fit:!1,className:"QrcodeApp__vw_18__Image1"})]})})})}),renderHeader:"",renderFooter:"",emptyHideHeader:!1,ref:this._refsManager.linkRef("autolist")})]})]}),e.jsx(s.Modal,{style:{},animate:"pop",renderView:_=>e.jsx(s.View,{className:"QrcodeApp__vw_19",children:e.jsx(s.Image,{src:r(()=>t.state.previewImgUrl),remote:!1,fit:!1,className:"QrcodeApp__vw_19__Image"})}),visible:!1,maskClosable:!0,ref:this._refsManager.linkRef("modal")})]})}}const te='<svg xmlns="http://www.w3.org/2000/svg"   viewBox="0 0 24 24"><path fill="#333333" d="M7.38 21.01c.49.49 1.28.49 1.77 0l8.31-8.31a.996.996 0 0 0 0-1.41L9.15 2.98c-.49-.49-1.28-.49-1.77 0s-.49 1.28 0 1.77L14.62 12l-7.25 7.25c-.48.48-.48 1.28.01 1.76z"/></svg>',ae={svg_veva15:te};const{px:oe,RefsManager:ie,$eval:x,$evalArray:S,$createChildContext:C}=m;class we extends g.Component{constructor(t,_){super(t);o(this,"utils",Object.assign({getRoute:m.createRoute("ApplicationList")},m));o(this,"constants",q);o(this,"_refsManager",new ie);o(this,"$",t=>this._refsManager.get(t));o(this,"$$",t=>this._refsManager.getAll(t));this.state={tab:0,apps:[{_id:"xxxx",alias:"ai_qrcode",name:"ArtQR 智绘二维码",desc:"可轻松把您的二维码变得创意十足，超级吸睛！"}]}}setStateValue(t,{field:_,valueField:a,indexs:i},l){const c={...this.state};let n=t;a&&(n=a.split(".").reduce((w,h)=>w&&w[h],t));const p=(i==null?void 0:i.length)>0?_.replace(/\.\[\]/g,w=>`[${i.shift()}].`).replace(".[item]",""):_;this.utils.setValue(c,p,n),this.setState(c,l)}async async_componentDidMount(){}componentDidMount(){this.async_componentDidMount()}render(){const t=this;return e.jsx(g.Fragment,{children:e.jsxs(s.View,{className:"ApplicationList__application_list__vw M-flex-item",children:[e.jsxs(s.View,{className:"ApplicationList__application_list__vw__vw",children:[e.jsx(s.View,{ref:this._refsManager.linkRef("view-4572ad61"),className:"ApplicationList__application_list__vw__vw__vw M-flex-item",children:e.jsx(s.Text,{className:"ApplicationList__application_list__vw__vw__vw__tx",children:"应用商店"})}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-920742fa"),className:"ApplicationList__application_list__vw__vw__vw1 M-flex-item"})]}),e.jsxs(s.ScrollView,{ref:this._refsManager.linkRef("scrollview"),className:"ApplicationList__application_list__vw__sv1 M-flex-item",children:[e.jsx(s.View,{className:"ApplicationList__application_list__vw__sv1__vw"}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-ee2507cc"),children:e.jsx(s.View,{className:"ApplicationList__vw",children:e.jsx(s.ScrollView,{ref:this._refsManager.linkRef("scrollview1"),children:e.jsx(s.View,{ref:this._refsManager.linkRef("view-635ba75c"),className:"ApplicationList__vw_1",children:S(()=>["全部","AI","学习","工具"]).map((_,a)=>(i=>e.jsx(s.View,{onClick:l=>{i.setStateValue(a,{field:"tab"})},ref:this._refsManager.linkRef("view-b135e381"),inlineStyle:[{enable:x(()=>i.state.tab===a),name:"动态样式1",style:{backgroundColor:"#1004fe"}}],className:"ApplicationList__vw_1__vw",children:e.jsx(s.Text,{ref:this._refsManager.linkRef("text-cc24e73b"),inlineStyle:[{enable:x(()=>i.state.tab!==a),name:"动态样式1",style:{color:"#9391fe"}}],className:"ApplicationList__vw_1__vw__tx",children:x(()=>_)})}))(C(t,{item:_,index:a})))})})})}),e.jsx(s.View,{className:"ApplicationList__application_list__vw__sv1__vw2",children:e.jsxs(s.View,{className:"ApplicationList__application_list__vw__sv1__vw2__vw",children:[e.jsx(I,{align:"top","h-gutter":15,"v-gutter":15,justify:"start",wrap:!0,gutter:[15,15],children:S(()=>this.state.apps).map((_,a)=>(i=>e.jsx(j,{span:12,order:0,xs:24,sm:24,md:12,lg:8,xl:8,xxl:8,ref:this._refsManager.linkRef("col-7c1d7627"),children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-12fc590b"),onClick:l=>{var c,n;(n=(c=i.props)==null?void 0:c.onChangeApp)==null||n.call(c,{alias:"qrcode"})},className:"ApplicationList__vw_2 M-gb-click",children:[e.jsx(s.View,{className:"ApplicationList__vw_2__vw",children:e.jsxs(s.View,{ref:this._refsManager.linkRef("view-b3a9b849"),className:"ApplicationList__vw_2__vw__vw M-flex-item",children:[e.jsx(s.View,{className:"ApplicationList__vw_2__vw__vw__vw",children:e.jsx(s.ImageBackground,{src:"https://file.mengti.cc/FpNeCSgcSyFfVj8PeqQiCjZJYpKf",className:"ApplicationList__vw_2__vw__vw__vw__ibg"})}),e.jsxs(s.View,{className:"ApplicationList__vw_2__vw__vw__vw1 M-flex-item",children:[e.jsx(s.View,{ref:this._refsManager.linkRef("view-b3a9b849"),className:"ApplicationList__vw_2__vw__vw__vw1__vw M-flex-item",children:e.jsx(s.Text,{ref:this._refsManager.linkRef("text-33e674a6"),className:"ApplicationList__vw_2__vw__vw__vw1__vw__tx",children:x(()=>_==null?void 0:_.name)})}),e.jsx(s.View,{className:"ApplicationList__vw_2__vw__vw__vw1__vw1 M-flex-item",children:e.jsx(s.Text,{numberOfLines:4,ref:this._refsManager.linkRef("text-329ba662"),className:"ApplicationList__vw_2__vw__vw__vw1__vw1__tx",children:x(()=>_==null?void 0:_.desc)})})]})]})}),e.jsx(s.View,{className:"ApplicationList__vw_2__vw1"}),e.jsxs(s.View,{ref:this._refsManager.linkRef("view-475fd6cb"),className:"ApplicationList__vw_2__vw2",children:[e.jsx(s.View,{className:"ApplicationList__vw_2__vw2__vw M-flex-item"}),e.jsx(s.View,{className:"ApplicationList__vw_2__vw2__vw1"}),e.jsx(s.View,{className:"ApplicationList__vw_2__vw2__vw2",children:e.jsx(s.AtIcon,{color:"#333333",size:17,svg:ae.svg_veva15})})]})]})}))(C(t,{item:_,index:a})))}),e.jsx(s.View,{ref:this._refsManager.linkRef("view-8d7af1d4"),children:!!x(()=>this.state.apps.length===0)&&e.jsx(s.View,{ref:this._refsManager.linkRef("view-405d3038"),className:"ApplicationList__vw_3",children:e.jsx(s.AtActivityIndicator,{size:28,color:"#6190E8",isOpened:!0,className:"ApplicationList__vw_3__AtActivityIndicator"})})})]})})]})]})})}}export{we as A,ne as Q};
